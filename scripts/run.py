import fitz, json, numpy as np, faiss; from sentence_transformers import SentenceTransformer; from pathlib import Path; print('Model yükleniyor...'); model = SentenceTransformer('all-MiniLM-L6-v2'); print('PDF işleniyor...'); chunks = []; [chunks.append({'text': ' '.join(fitz.open(p)[0].get_text().split()[:500]), 'file': p.name}) for p in list(Path('../data_processing/real_papers/pdfs').glob('*.pdf'))[:3] if len(fitz.open(p)[0].get_text()) > 100]; print(f'{len(chunks)} chunk'); embeddings = model.encode([c['text'] for c in chunks]); out = Path('../final_system/index'); out.mkdir(parents=True, exist_ok=True); json.dump(chunks, open(out/'chunks.json', 'w'), indent=2); np.save(out/'emb.npy', embeddings); print('Tamamlandı!')
